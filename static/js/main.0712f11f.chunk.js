(this["webpackJsonpAlon-Tal-07-07-2020"]=this["webpackJsonpAlon-Tal-07-07-2020"]||[]).push([[0],{125:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(9),c=a.n(i),o=a(32),u=a(23),l=a(72),s=a(173),m=a(174),p=a(83),f=a(12),h=a(79),y=a(168),d=a(161),v=a(14),g=a(17),x=a.n(g),b=a(26),E=a(18),O=a(175),C=a(176),T=a(49),w=a.n(T),j=a(50),A=a.n(j),N={getCurrentWeather:function(e){return D.apply(this,arguments)},getAutoCompCityList:function(e){return w.a.get(F(e)).then((function(e){return e.data})).catch((function(){A.a.fire({type:"error",title:"You have exceeded 50 calls to the Server per Day",text:"Please, Try again tomorrow or with another Api Key."})}))},getForecasts:function(e){return S.apply(this,arguments)},getDefaultCity:function(){return k[0]}};function D(){return(D=Object(b.a)(x.a.mark((function e(t){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.get(W(t));case 3:return a=e.sent,n=a.data[0],e.abrupt("return",n);case 8:throw e.prev=8,e.t0=e.catch(0),A.a.fire({type:"error",title:"You have exceeded 50 calls to the Server per Day",text:"Please, Try again tomorrow or with another Api Key."}),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function S(){return(S=Object(b.a)(x.a.mark((function e(t){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.get(U(t));case 3:return a=e.sent,n=a.data.DailyForecasts,e.abrupt("return",n);case 8:throw e.prev=8,e.t0=e.catch(0),A.a.fire({type:"error",title:"You have exceeded 50 calls to the Server per Day",text:"Please, Try again tomorrow or with another Api Key."}),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}var L="nEcFKqO7yXdLTQEIyW86i8zsOZSNlb2x",W=function(e){return"https://dataservice.accuweather.com/currentconditions/v1/"+e+"?apikey="+L},U=function(e){return"https://dataservice.accuweather.com/forecasts/v1/daily/5day/"+e+"?apikey="+L},F=function(e){return"https://dataservice.accuweather.com/locations/v1/cities/autocomplete?apikey="+L+"&q="+e},k=[{Version:1,Key:"215854",Type:"City",Rank:31,LocalizedName:"Tel Aviv",EnglishName:"Tel Aviv",PrimaryPostalCode:"",Region:{ID:"MEA",LocalizedName:"Middle East",EnglishName:"Middle East"},Country:{ID:"IL",LocalizedName:"Israel",EnglishName:"Israel"},AdministrativeArea:{ID:"TA",LocalizedName:"Tel Aviv",EnglishName:"Tel Aviv",Level:1,LocalizedType:"District",EnglishType:"District",CountryID:"IL"},TimeZone:{Code:"IDT",Name:"Asia/Jerusalem",GmtOffset:3,IsDaylightSaving:!0,NextOffsetChange:"2020-10-24T23:00:00Z"},GeoPosition:{Latitude:32.045,Longitude:34.77,Elevation:{Metric:{Value:34,Unit:"m",UnitType:5},Imperial:{Value:111,Unit:"ft",UnitType:0}}},IsAlias:!1,SupplementalAdminAreas:[],DataSets:["AirQualityCurrentConditions","AirQualityForecasts","Alerts","ForecastConfidence"]},{LocalObservationDateTime:"2020-07-16T14:36:00+03:00",EpochTime:1594899360,WeatherText:"Sunny",WeatherIcon:1,HasPrecipitation:!1,PrecipitationType:null,IsDayTime:!0,Temperature:{Metric:{Value:29.8,Unit:"C",UnitType:17},Imperial:{Value:86,Unit:"F",UnitType:18}},MobileLink:"http://m.accuweather.com/en/il/tel-aviv/215854/current-weather/215854?lang=en-us",Link:"http://www.accuweather.com/en/il/tel-aviv/215854/current-weather/215854?lang=en-us"}];function I(e){return{type:"LOAD_CITY",city:e}}function z(e){return{type:"WEATHER_UPDATE",currentWeather:e}}function P(e){return{type:"FORECASTS_UPDATE",forecasts:e}}function M(e){return{type:"AUTO_COMPLETE_UPDATE",cityList:e}}var _=a(127),H=a(164),K=a(166),R=Object(d.a)({root:{minWidth:150,maxHeight:140,textAlign:"center"},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginTop:12}}),V=function(e){var t=R(),a=e.forecast;return r.a.createElement(H.a,{className:t.root},r.a.createElement(K.a,null,r.a.createElement(_.a,{className:t.title,color:"textSecondary",gutterBottom:!0},new Date(a.Date).toString().slice(0,3)),r.a.createElement(_.a,{variant:"h6",component:"h2"},a.Day.IconPhrase),r.a.createElement(_.a,{className:t.pos,color:"textSecondary"},function(){var e=a.Temperature.Maximum.Value,t=a.Temperature.Minimum.Value;return Math.floor(5*((e+t)/2-32)/9).toString()+" \xb0C"}())))},B=a(167),q=a(76),G=a.n(q),J=a(20),Y={query:Q,get:function(e,t){return Q(e).find((function(e){return e.cityKey===t}))},post:function(e,t){var a=Q(e);return a.push(t),X(e,a),t},put:function(e,t){var a=Q(e),n=a.findIndex((function(e){return e.cityKey===t.cityKey}));return a.splice(n,1,t),X(e,a),t},remove:function(e,t){var a=Q(e);a=a.filter((function(e){return e.Key!==t})),X(e,a)},postMany:function(e,t){var a=Q(e);return a.push.apply(a,Object(J.a)(t)),X(e,a),a}};function Q(e){return JSON.parse(localStorage.getItem(e))||[]}function X(e,t){localStorage.setItem(e,JSON.stringify(t))}var Z={query:function(){var e=Y.query("favorites");return 0===e.length?Y.postMany("favorites",e):e},save:function(e){return Y.post("favorites",e)},remove:function(e){return Y.remove("favorites",e)},get:function(e){return Y.get("favorites",e)}};var $=function(e){for(var t=Z.query(),a=0;a<t.length;a++)if(e.Key===t[a].Key)return!0;return!1},ee=Object(d.a)((function(e){return{button:{color:function(e){return $(e.city)?"#FFDF00":"lightGrey"}}}})),te=Object(u.b)((function(e){return{city:e.city,currentWeather:e.currentWeather}}),{})((function(e){var t=ee(e),a=e.city,i=e.currentWeather,c=Object(n.useState)($(a)),o=Object(E.a)(c,2),u=o[0],l=o[1];Object(n.useEffect)((function(){l($(a))}),[a]);return r.a.createElement(B.a,{onClick:function(){if(u)Z.remove(a.Key);else{var e=Object(v.a)(Object(v.a)(Object(v.a)({},a),i),{},{isFavorite:!0});Z.save(e)}l((function(e){return!e}))},variant:"contained"},r.a.createElement(G.a,{className:t.button}))})),ae=Object(d.a)((function(e){return{root:{maxWidth:"1550px"},text:{margin:"10px"},card:{margin:"10px"},weatherText:{margin:"0px 60px 60px 60px",textAlign:"center"},textGrid:{border:"1px solid lightgrey"},"@media (max-width:730px)":{}}})),ne=Object(u.b)((function(e){return{city:e.city,currentWeather:e.currentWeather,forecasts:e.forecasts}}),{})((function(e){var t=ae(),a=e.city,n=e.currentWeather,i=e.forecasts;return r.a.createElement(y.a,{container:!0,direction:"column"},r.a.createElement(y.a,{item:!0,container:!0,direction:"row"},r.a.createElement(y.a,{item:!0,xs:1}),r.a.createElement(y.a,{item:!0,container:!0,xs:10,direction:"column",className:t.textGrid},r.a.createElement(_.a,{className:t.text,variant:"h5",component:"h2"},a.LocalizedName," ",r.a.createElement(te,null)),r.a.createElement(_.a,{className:t.text,variant:"h5",component:"h2"},n.Temperature.Metric.Value.toString()+" \xb0C"),r.a.createElement(_.a,{className:t.weatherText,variant:"h2"},n.WeatherText)),r.a.createElement(y.a,{item:!0,xs:1})),r.a.createElement(y.a,{container:!0,item:!0,direction:"row",justify:"center",alignItems:"center"},i&&i.map((function(e,a){return r.a.createElement(y.a,{item:!0,className:t.card,key:a},r.a.createElement(V,{forecast:e}))}))))})),re=Object(d.a)((function(){return{button:{width:"150px"},form:{display:"flex",flexDirection:"column",width:"300px",margin:"30px auto",alignItems:"center"}}})),ie={updateCity:function(e){return function(t){t(I(e))}},setDefaultCity:function(){return function(e){e(I(N.getDefaultCity()))}},updateCurrentWeather:function(e){return function(){var t=Object(b.a)(x.a.mark((function t(a){var n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,N.getCurrentWeather(e.Key);case 3:n=t.sent,a(z(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("ForecastsAction: err in updateForecasts",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},updateForecasts:function(e){return function(){var t=Object(b.a)(x.a.mark((function t(a){var n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,N.getForecasts(e.Key);case 3:n=t.sent,a(P(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("ForecastsAction: err in updateForecasts",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},getAutoCompCityList:function(e){return function(t){N.getAutoCompCityList(e).then((function(e){t(M(e))})).catch()}},resetAutoCompCityList:function(){return function(e){e(M([]))}}},ce=Object(u.b)((function(e){return{city:e.city,currentWeather:e.currentWeather,autoCompCityList:e.autoCompCityList}}),ie)((function(e){var t=re(),a=Object(n.useState)(N.getDefaultCity()),i=Object(E.a)(a,2),c=i[0],o=i[1],u=Object(n.useRef)(!0);Object(n.useEffect)((function(){function t(){return(t=Object(b.a)(x.a.mark((function t(){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.updateCurrentWeather(c);case 2:return t.next=4,e.updateForecasts(c);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}u.current||e.updateCity(c),function(){t.apply(this,arguments)}()}),[c]),Object(n.useEffect)((function(){u.current=!1}),[]);var l=function(){var t=Object(b.a)(x.a.mark((function t(a){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===a){t.next=5;break}return t.next=3,e.getAutoCompCityList(a);case 3:t.next=6;break;case 5:e.resetAutoCompCityList();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s=function(e,t){var a;return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var c=function(){a=null,e.apply(void 0,r)};clearTimeout(a),a=setTimeout(c,t)}}((function(e){return l(e)}),500);return r.a.createElement(y.a,{item:!0,container:!0,direction:"column"},r.a.createElement(y.a,{item:!0},r.a.createElement(C.a,{freeSolo:!0,onChange:function(t,a){a=a.split(" (")[0];var n=Object.values(e.autoCompCityList).find((function(e){return e.LocalizedName===a}));o(Object(v.a)({},n))},disableClearable:!0,options:e.autoCompCityList&&e.autoCompCityList.map((function(e){return e.LocalizedName+" ("+e.Country.ID+")"})),renderInput:function(e){return r.a.createElement("form",{className:t.form},r.a.createElement(O.a,Object.assign({},e,{className:t.textField,label:"Search City",margin:"normal",variant:"outlined",onChange:function(e){return s(e.target.value)},InputProps:Object(v.a)(Object(v.a)({},e.InputProps),{},{type:"search"})})))}})),r.a.createElement(y.a,{item:!0},r.a.createElement(ne,null)))})),oe=a(170),ue=a(171),le=a(177),se=a(172),me=Object(d.a)((function(e){return{toolbar:{height:"70px"},typography:{flex:1,fontSize:"16px",fontWeight:"600"},link:{paddingRight:"40px"},"@media (min-width:1300px)":{toolbar:{height:"80px"}},"@media (max-width:500px)":{link:{paddingRight:"20px"}}}})),pe=function(e){var t=me();return r.a.createElement(oe.a,{position:"static",elevation:0},r.a.createElement(ue.a,{className:t.toolbar},r.a.createElement(_.a,{className:t.typography},"Weather App"),r.a.createElement(le.a,{component:"nav","aria-label":"main manu"},r.a.createElement(se.a,{href:"/Alon-Tal-07-07-2020/",className:t.link,color:"inherit",variant:"body1"},"Home"),r.a.createElement(se.a,{href:"/Alon-Tal-07-07-2020/#/favorites",className:t.link,color:"inherit",variant:"body1"},"Favorites"))))},fe=Object(d.a)({root:{minWidth:150,maxHeight:140,textAlign:"center"},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginTop:3}}),he=Object(u.b)((function(e){return{city:e.city,currentWeather:e.currentWeather,favorites:e.favorites}}),{})((function(e){var t=fe(),a=e.favorite;return r.a.createElement(H.a,{className:t.root},r.a.createElement(K.a,null,r.a.createElement(_.a,{className:t.title,color:"textSecondary",gutterBottom:!0},a.LocalizedName),r.a.createElement(_.a,{variant:"h6",component:"h2"},new Date(a.LocalObservationDateTime).toString().slice(0,3)),r.a.createElement(_.a,{className:t.pos,color:"textSecondary"},function(){var e=a.Temperature.Metric.Value;return e=Math.floor(e).toString()+" \xb0C"}()),r.a.createElement(_.a,{className:t.pos,color:"textSecondary"},a.WeatherText)))})),ye=Object(d.a)((function(e){return{root:{maxWidth:"1550px"},text:{margin:"10px"},card:{margin:"10px"},noFavText:{marginTop:"20px"},weatherText:{margin:"30px 60px 60px 60px",textAlign:"center"},textGrid:{border:"1px solid lightgrey"},"@media (max-width:730px)":{}}})),de=function(e){var t=ye(),a=Z.query();return r.a.createElement(y.a,{container:!0,direction:"column"},r.a.createElement(y.a,{container:!0,item:!0,direction:"row",justify:"center",alignItems:"center"},a&&a.length>0&&a.map((function(e,a){return r.a.createElement(y.a,{item:!0,className:t.card,key:a},r.a.createElement(he,{favorite:e}))})),(!a||0===a.length)&&r.a.createElement(_.a,{className:t.noFavText},"No Favorite Cities.")))},ve=a(85),ge=Object(h.a)(),xe=Object(d.a)((function(e){return{}}));var be=function(e){return xe(),r.a.createElement(ve.a,{elevation:0},r.a.createElement(y.a,{container:!0,direction:"column"},r.a.createElement(y.a,{item:!0,xs:12},r.a.createElement(pe,null)),r.a.createElement(y.a,{item:!0,container:!0,xs:12},r.a.createElement(p.a,{history:ge,basename:"/Alon-Tal-07-07-2020"},r.a.createElement(f.c,null,r.a.createElement(f.a,{path:"/favorites",component:de,exact:!0}),r.a.createElement(f.a,{path:"/",component:ce,exact:!0}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ee,Oe=a(13),Ce=a(82),Te=a(81),we=a.n(Te),je=a(80),Ae={fontFamily:"NeueHaasDisplay",fontStyle:"normal",fontDisplay:"swap",fontWeight:400,src:"\n  local('NeueHaasDisplay'),\n    local('NeueHaasDisplay-Roman'),\n    url(".concat(a.n(je).a,") format('woff')\n  "),unicodeRange:"U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF"},Ne=Object(Ce.a)({breakpoints:{values:{xs:0,sm:600,md:800,lg:960,xl:1920}},palette:{primary:{main:"#1976d2"},secondary:{main:we.a[500]}},spacing:8,typography:{fontFamily:["NeueHaasDisplay"].join(","),h1:{fontSize:"60px",fontWeight:"400",lineHeight:"75px"},h2:{fontSize:"50px",fontWeight:"400"},h3:{fontSize:"17px",fontWeight:"400",lineHeight:"20px"},h4:{fontSize:"13px"},subtitle1:{fontSize:"40px",fontWeight:"400",lineHeight:"50px"}},overrides:{MuiCssBaseline:{"@global":{"@font-face":[Ae]}}}});Ne.typography.h1=Object(v.a)(Object(v.a)({},Ne.typography.h1),{},(Ee={paddingLeft:"50px"},Object(Oe.a)(Ee,Ne.breakpoints.down("lg"),{paddingLeft:"50px",paddingRight:"20px"}),Object(Oe.a)(Ee,"@media (max-width:735px)",{fontSize:"8.9vw",paddingLeft:"10px",lineHeight:"10vw",padding:"0px"}),Object(Oe.a)(Ee,"@media (max-width:500px)",{fontSize:"11.6vw",lineHeight:"13.5vw",padding:"0px"}),Ee));var De=Ne,Se={city:{Key:"215854",LocalizedName:"Tel Aviv"},currentWeather:{Temperature:{Metric:{Value:"--"}}},forecasts:[],autoCompCityList:[]},Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"LOAD_CITY":return Object(v.a)(Object(v.a)({},e),{},{city:t.city});case"WEATHER_UPDATE":return Object(v.a)(Object(v.a)({},e),{},{currentWeather:Object(v.a)({},t.currentWeather)});case"AUTO_COMPLETE_UPDATE":return Object(v.a)(Object(v.a)({},e),{},{autoCompCityList:t.cityList});case"FORECASTS_UPDATE":return Object(v.a)(Object(v.a)({},e),{},{forecasts:Object(J.a)(t.forecasts)});default:return e}},We=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.c,Ue=Object(o.d)(Le,We(Object(o.a)(l.a)));c.a.render(r.a.createElement(s.a,{theme:De},r.a.createElement(m.a,null),r.a.createElement(u.a,{store:Ue},r.a.createElement(be,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},80:function(e,t,a){e.exports=a.p+"static/media/NeueHaasDisplay-Roman.127d6b3d.woff"},95:function(e,t,a){e.exports=a(125)}},[[95,1,2]]]);
//# sourceMappingURL=main.0712f11f.chunk.js.map